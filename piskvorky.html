<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nová karta</title>
</head>

<body>
    <header>Piškvorky</header>
    <main>

        <div class="board" id="board">
            <div class="collumn noborder">
                ⨯
                <div class="collumn-item">1</div>
                <div class="collumn-item">2</div>
                <div class="collumn-item">3</div>
                <div class="collumn-item">4</div>
                <div class="collumn-item">5</div>
                <div class="collumn-item">6</div>
                <div class="collumn-item">7</div>
                <div class="collumn-item">8</div>
                <div class="collumn-item">9</div>
                <div class="collumn-item">10</div>
                <div class="collumn-item">11</div>
                <div class="collumn-item">12</div>
                <div class="collumn-item">13</div>
                <div class="collumn-item">14</div>
                <div class="collumn-item">15</div>
            </div>
            <div class="collumn">
                A
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                B
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                C
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                D
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                E
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                F
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                G
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                H
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item h8"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                I
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                J
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                K
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                L
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                M
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                N
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>
            <div class="collumn">
                O
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
                <div class="collumn-item"></div>
            </div>

        </div>

        <input type="button" value="AI" onclick="AI()" style="display: none;">
    </main>
    <span id="sho"></span>
</body>

<script>
    const x = "⨯"
    const o = "○"
    var move = x
    let board = {}
    const sho = document.querySelector("#sho")
    sho.innerText = x
    let width = 0;
    let height = 0;
    let startTime
    let endTime
    document.querySelectorAll(".collumn-item").forEach((el) => {
        el.addEventListener("click", (click) => {
            if (!startTime) {
                startTime = new Date()
            }
            if (el.innerText != "")
                return
            el.innerText = move
            el.setAttribute("name", move)
            if (move == x) {
                move = o
            } else {
                move = x
            }
            sho.innerText = move

            let x1 = 0;
            let y1 = 0;
            document.querySelectorAll(".collumn").forEach((coll) => {
                coll.querySelectorAll(".collumn-item").forEach((row) => {
                    if (!board[x1])
                        board[x1] = []
                    board[x1][y1] = row.innerText == x ? 1 : row.innerText == o ? 2 : 0;
                    y1++;
                });
                x1++;
                height = y1;
                y1 = 0;
            })
            width = x1;
        })
    })

    setInterval(() => {
        for (let x1 = 0; x1 < width; x1++) {
            for (let y1 = 0; y1 < height; y1++) {
                const element = board[x1][y1]

                if (element == 0) {
                    continue
                }

                isRow(x1, y1, 1, 0, element)
                isRow(x1, y1, -1, 0, element)
                isRow(x1, y1, 0, -1, element)
                isRow(x1, y1, 0, 1, element)
                isRow(x1, y1, 1, 1, element)
                isRow(x1, y1, 1, -1, element)
                isRow(x1, y1, -1, 1, element)
                isRow(x1, y1, -1, -1, element)
            }
        }
    }, 20)

    function isRow(x1, y1, xM, yM, t) {
        let els = []
        for (let i = 0; i < 5; i++) {
            let tx = x1 + i * xM
            let ty = y1 + i * yM

            if (board[tx][ty] != t) {
                return;
            } else {
                els.push(document.querySelectorAll(".collumn")[tx].querySelectorAll(".collumn-item")[ty])
            }
        }

        els.forEach(el => {
            el.classList.add("cross")
        })

        if (!endTime) {
            endTime = new Date()
        }

        const time = (endTime.getTime() - startTime.getTime()) / 1000
        document.querySelector("#board").classList.add("end")
        sho.innerText = "Hráč " + t + " vyhrál!" + "\n" + "Hra trvala: " + time + "s"
    }

    function AI() {
        setInterval(() => {
            if (move == o) {
                const x = parseInt((Math.random() * 10) + "")
                const y = parseInt((Math.random() * 10) + "")
                console.log(x + " " + y)

                if (board[x][y])
                    return;

                move = x
            }
        }, 1000);
    }
</script>

<style>
    #sho {
        font-size: 2em;
        margin-right: .1em;
    }

    body {
        margin: 0px;
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        width: 100vw;
        height: 100vh;
        background-color: black;
        color: whitesmoke;
    }

    .end {
        pointer-events: none;
    }

    main {
        margin: 0px;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 90%;
    }

    .board {
        display: flex;
        width: 640px;
        height: 640px;
        flex-direction: collumn;
        cursor: crosshair;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
    }

    .collumn {
        width: 100%;
        height: 80px;
        font-size: 40px;
    }

    .collumn-item {
        float: left;
        width: 40px;
        height: 40px;
        display: inline;
        font-size: 40px;
        text-align: center;
        user-select: none;
        border: solid 1px whitesmoke;
    }

    .h8 {
        background-color: aquamarine;
    }

    .cross {
        background-color: coral;
    }

    div[name="⨯"] {
        color: red;
    }

    div[name="○"] {
        color: blue;
    }

    .noborder>div {
        border-right: none;
        border-top: none;
        border-left: none;
        padding: .5px;
    }
</style>

</html>